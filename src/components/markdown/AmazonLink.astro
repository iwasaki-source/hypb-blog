---
const { imageId, linkId, title, author } = Astro.props;
---

<div class="amazon">
  <a href=`https://amzn.to/${linkId}` class="amazon__link -img" target="_blank">
    <img src=`https://m.media-amazon.com/images/I/${imageId}.jpg` alt=`${title}` width="170" height="220" loading="lazy">
  </a>
  <a href=`https://amzn.to/${linkId}` class="amazon__link -text" target="_blank">
    <span class="title">{title}</span>
    <span class="author">著者: {author}</span>
    <span class="btn">Amazon.co.jpで購入する</span>
  </a>
</div>

<style lang="scss" is:global>
  .amazon {
    margin-top: 2.8rem;
    display: grid;
    grid-template-columns: 22% auto;
    border: 3px solid transparent;
    border-radius: 0.25rem;
    background: var(--black);
    transition: border-color 0.3s;
    a {
      color: var(--gray-10);
      text-decoration: none;
    }
    @include mixin.phone {
      grid-template-columns: 1fr;
      gap: 1rem;
      padding: 1rem 1rem 1.5rem;
    }
    @media (hover: hover) {
      &:hover {
        border-color: var(--yellow);
      }
    }
    &__link {
      padding: 1rem;
      text-decoration: none;
      @include mixin.large {
        padding-right: 0;
      }
      @include mixin.phone {
        padding: 0;
      }
      &.-img {
        @include mixin.phone {
          max-width: 180px;
          margin-inline: auto;
        }
      }
      &.-text {
        display: flex;
        flex-direction: column;
        padding-inline: 2rem 1rem;
        @include mixin.phone {
          padding-inline: 0;
        }
      }
    }
    .title {
      max-height: 66px;
      overflow: hidden;
      color: var(--gray-10);
      @include mixin.phone {
        font-size: 0.875rem;
        max-height: unset;
      }
    }
    .author {
      font-size: 0.75rem;
      margin-top: 0.5rem;
    }
    .btn {
      margin-top: auto;
      padding: 0.5rem;
      background: #e47911;
      border-radius: 0.25rem;
      color: var(--gray-10);
      font-size: 0.875rem;
      font-weight: 500;
      text-align: center;
      transition: filter 0.3s;
      @include mixin.phone {
        margin-top: 1rem;
      }
      @media (hover: hover) {
        &:hover {
          filter: brightness(1.1);
        }
      }
    }
  }
  h3 + .amazon {
    margin-top: 1.5rem;
  }
</style>